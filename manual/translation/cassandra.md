---
title: cassandra translation
layout: page
---

Every Cassandra table has at least two columns: A column named `p`,
which stores the [persistent object translated into JSON](json.html),
and a column named `id`, which stores a [primary key UUID](keys.html).

It [optimistic locking](../context/opt-lock.html) is turned on, then a
`row_version` column is also added.

Please note that the Cassandra optimistic locking implementation uses
[lightweight
transactions](http://docs.datastax.com/en/cassandra/2.0/cassandra/dml/dml_ltwt_transaction_c.html)
for updates and deletes, introducing an `IF row_version = ...` clause
to the database command. This will incur a performance penalty.

More columns are added to support any [keys](../ptype/keys.html) or
[indexes](../ptype/indexes.html) for the [persistent
type](../ptype). Every [property](../ptype/properties.html) used in a
key or index is expanded in to a sequence of property components that
all have [basic types](../basics.html). These property components are
each stored in
[indexed](https://docs.datastax.com/en/cql/3.1/cql/cql_reference/create_index_r.html)
Cassandra columns. These columns all have names prefixed with `prop_`, 

The property component columns are used to back calls to
[Repo.retrieve](../repo/retrieve.html), as well as [query
retrievals](../repo/query.html). Please note that queries constructed
using properties that are not part of a longevity key or index [will
fail](../repo/cassandra-query-limits.html).

For those of you who are disappointed that your retrievals are not
backed by a Cassandra primary key, remember that this is not a
permanent state of affairs. Please see the section on [partition
keys](keys.html) for more details.

Cassandra table names are generated by [underscoring the
camel-cased](http://longevityframework.github.io/longevity/scaladocs/emblem-latest/index.html#emblem.stringUtil$@camelToUnderscore(name:String):String)
name of the persistent class.

{% assign prevTitle = "mongo translation" %}
{% assign prevLink = "mongo.html" %}
{% assign upTitle = "translating persistents to the database" %}
{% assign upLink = "." %}
{% assign nextTitle = "managing logging" %}
{% assign nextLink = "../logging.html" %}
{% include navigate.html %}
